module.exports = (dbPool) => {
/////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
//                             Models (Access database) logic
//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
const checkUser = (input, callback) => {
      const queryText = "SELECT * FROM users WHERE name='" + input.name + "';";

      dbPool.query(queryText, (error, queryResult) => {

        if (error){
            console.log("ERROR QUERYING DB: ", error);
        }
        
        //const sqlQueryResultUser = queryResult.rows[0];
        callback(null, queryResult.rows[0]);
      });
  }

  const addData = (input, id, callback) => {
    const queryText = "INSERT INTO entrypasses (gym_name, quantity, expiry_date, user_id) VALUES ($1, $2, $3, $4);"
    const values = [input.gym, input.quantity, input.expiry, id];
    dbPool.query(queryText, values, (error, queryResult) => {
      callback(error);
    });
  }

  /////////////////////////////////////////////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////
  //                       Export Model functions
  //////////////////////////////////////////////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////
  return {
      addData,
      checkUser
    };
  };
