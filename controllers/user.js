const sha256 = require('sha256');
const SALT = "Bananas";

module.exports = (db) => {
  /////////////////////////////////////////////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////
  //                             Controller logic
  //////////////////////////////////////////////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////
  // const userHome = (req, res) => {
  //   res.render('./user/UserAccount');
  //   // res.render('./user/UserAccount', {user: queryResult.name});
  // }
  const getData = (req, res) => {
    res.render('./user/UserAddData');
  };

  const addData = (req, res) => {
    let id = req.cookies['userId'];


    db.user.addData(req.body, id, (error, queryResult) => {
      if(error){
        console.log('ERROR ADDING PASSES DATA: ', error);
        res.sendStatus(500);
      }
      //console.log("SUCCESS");
    });
    res.redirect('/account/user' );
  };

  const userHome = (req, res) => {


    res.render('./user/UserAccount', {user: req.cookies['name']});
}

  //////////////////////////////////////////////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////
  //                      Export controller functions
  //////////////////////////////////////////////////////////////////////////////
  //////////////////////////////////////////////////////////////////////////////
  return {
    userHome,
    getData,
    addData
  };
};
